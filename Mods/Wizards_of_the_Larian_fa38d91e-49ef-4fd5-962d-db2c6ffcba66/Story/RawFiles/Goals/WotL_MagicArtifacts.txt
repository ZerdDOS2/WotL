Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
//REGION Call Lua script
IF
	StoryEvent((CHARACTERGUID)_Char, "WotL_SetAllVariables")
THEN
	NRD_LuaCall("WotL_CheckMagicArtifact", (STRING)_Char);
//END_REGION

//REGION Tag Handler
IF
	CharacterStatusApplied(_Char, "WotL_MagicArtifactUser", _)
AND
	IsTagged(_Char, "WotL_MagicArtifactUser", 0)
THEN
	SetTag(_Char, "WotL_MagicArtifactUser");
	ApplyStatus(_Char, "WotL_REFRESHER", 0.0, 1);

IF
	CharacterStatusRemoved(_Char, "WotL_MagicArtifactUser", _)
AND
	IsTagged(_Char, "WotL_MagicArtifactUser", 1)
THEN
	ClearTag(_Char, "WotL_MagicArtifactUser");
	ApplyStatus(_Char, "WotL_REFRESHER", 0.0, 1);
//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "__WotL_Goal"
